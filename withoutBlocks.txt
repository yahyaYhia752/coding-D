local p = game.Players.LocalPlayer
m = p:GetMouse()
local screen = script.Parent
local posM = screen.posM
local auto= screen.auto
DholdingForEdit = 1
local Module = require(script.Parent:WaitForChild("ModuleScript"))
local D = {
	ColorOn = Color3.fromRGB(85, 170, 127);
	ColorOff = Color3.fromRGB(170, 87, 88);
	EditMode = Color3.fromRGB(85, 85, 255)
}
hold = false
cooldowns = {
	["block"] = script.Parent:WaitForChild("blockSpeed"):WaitForChild("Speed"),
	["sword"] = script.Parent:WaitForChild("SwordSpeed"):WaitForChild("Speed"),
	["bow"] = script.Parent:WaitForChild("BowSpeed"):WaitForChild("Speed"),
	["axe"] = script.Parent:WaitForChild("AxeSpeed"):WaitForChild("Speed"),
}
task.spawn(function()
	while wait(1) do
		game.Players.LocalPlayer.PlayerGui:WaitForChild("TouchGui1").Name = "TouchGui"
		wait()
		game.Players.LocalPlayer.PlayerGui:WaitForChild("TouchGui").Name = "TouchGui1"
	end 
end)
-- set eqtool
task.spawn(function()
	local p = game.Players.LocalPlayer
	while task.wait() do
		if p.Character and p.Character:FindFirstChildOfClass("Tool") then
			script.Parent:WaitForChild("eqTool").Value = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
		else
			script.Parent:WaitForChild("eqTool").Value = nil
		end
	end
end)

--TextSpeed
task.spawn(function()
	for i,v in pairs(cooldowns) do


		local txtbox:TextBox = v.Parent:WaitForChild("TextBox")
		txtbox.FocusLost:Connect(function()
			txt = txtbox.Text
			if tonumber(txt) == nil then
				print("ERROR: you cant use letters on the speed")
				return nil
			end
			if tonumber(txt)/100 <= 0 then -- that mean try again
				print("ERROR: you cant use this number")
				return nil
			end

			v.Value = tonumber(txt)/100
			game.TweenService:Create(txtbox.Parent,TweenInfo.new(.5),{BackgroundTransparency = 1}):Play()
			game.TweenService:Create(txtbox.Parent.UIStroke,TweenInfo.new(.5),{Transparency = 1}):Play()
			game.TweenService:Create(txtbox,TweenInfo.new(.5),{TextTransparency = 1}):Play()
		end)
	end
end)

-- pos mouse
task.spawn(function()
	game["Run Service"].RenderStepped:Connect(function()
		posM.Position = UDim2.new(0,m.X,0,m.Y)
	end)
end)
-- set if button is hold or not
task.spawn(function()
	auto.F.MouseButton1Down:Connect(function()
		hold = true
	end)
	auto.F.MouseButton1Up:Connect(function()
		hold = false
	end)
end)

-- Do auto true or false
task.spawn(function()
	auto.F.MouseButton1Down:Connect(function()
		holdTime = DholdingForEdit
		print("started")
		if auto:WaitForChild("EditMode").Value == false then
			for i=1,holdTime*100 do
				task.wait(holdTime/100)
				if hold ~= true then
					return nil
				end
			end
			auto:WaitForChild("EditMode").Value = true
		end
	end)
	auto.F.MouseButton1Up:Connect(function()
		if auto:WaitForChild("EditMode").Value == true then
			auto:WaitForChild("EditMode").Value = false
		end
	end)
	auto.F.MouseButton1Up:Connect(function()
		if auto:WaitForChild("EditMode").Value == true then
		else
			auto:WaitForChild("Start").Value = not auto:WaitForChild("Start").Value
		end
	end)

	game.UserInputService.InputBegan:Connect(function(k)
		if k.KeyCode == Enum.KeyCode.E then
			if auto:WaitForChild("EditMode").Value == true then
			else
				auto:WaitForChild("Start").Value = not auto:WaitForChild("Start").Value
			end
		end
	end)
end)


-- script autoClicker
for i,v in pairs(cooldowns) do
	repeat wait() until v.Value > 0
end
local function updateColors(v)
	if v then
		game.TweenService:Create(auto.UIStroke,TweenInfo.new(.5),{Color = D.ColorOn}):Play()
		game.TweenService:Create(posM.UIStroke,TweenInfo.new(.5),{Color = D.ColorOn}):Play()
	else
		game.TweenService:Create(auto.UIStroke,TweenInfo.new(.5),{Color = D.ColorOff}):Play()
		game.TweenService:Create(posM.UIStroke,TweenInfo.new(.5),{Color = D.ColorOff}):Play()
	end
end
task.spawn(function()


	local v = false
	auto.Start.Value = v
	updateColors(v)
	wait()
	auto.Start.Changed:Connect(function()
		v = auto.Start.Value
		updateColors(v)
	end)
end)
-- script editMode

task.spawn(function()
	auto:WaitForChild("EditMode").Changed:Connect(function()
		if auto:WaitForChild("EditMode").Value == true then
			auto.Start.Value = false
			game.TweenService:Create(auto.UIStroke,TweenInfo.new(.5),{Color = D.EditMode}):Play()
			game.TweenService:Create(posM.UIStroke,TweenInfo.new(.5),{Color = D.EditMode}):Play()
		else
			updateColors(auto:WaitForChild("Start").Value)
		end
	end)
end)
-- loop edit
task.spawn(function()

	while task.wait() do
		enable = auto:WaitForChild("EditMode").Value
		if enable == true then
			game.TweenService:Create(auto,TweenInfo.new(.2),{Position = UDim2.new(0,p:GetMouse().X,0,p:GetMouse().Y)}):Play()
		end
	end
end)
-- loop auto
task.spawn(function()
	while true do
		if auto.Start.Value then
			if script.Parent:WaitForChild("eqTool").Value ~= nil then
				-- function click
				Module:Click()
			end
		end
		task.wait()
	end
end)
